---
title: "AgentDropoutV2: Optimizing Information Flow in Multi-Agent Systems via Test-Time Rectify-or-Reject Pruning"
authors:
  - "Yutong Wang"
  - "Siyuan Xiong"
  - "Xuebo Liu"
  - "Wenkang Zhou"
  - "Liang Ding"
  - "Miao Zhang"
  - "Min Zhang"
date: "2026-02-26"
arxiv_id: "2602.23258"
arxiv_url: "https://arxiv.org/abs/2602.23258"
pdf_url: "https://arxiv.org/pdf/2602.23258v1"
categories:
  - "cs.AI"
  - "cs.CL"
tags:
  - "多智能体系统"
  - "信息流优化"
  - "测试时剪枝"
  - "错误纠正"
  - "错误传播"
  - "推理"
  - "系统架构"
  - "检索增强"
relevance_score: 9.5
---

# AgentDropoutV2: Optimizing Information Flow in Multi-Agent Systems via Test-Time Rectify-or-Reject Pruning

## 原始摘要

While Multi-Agent Systems (MAS) excel in complex reasoning, they suffer from the cascading impact of erroneous information generated by individual participants. Current solutions often resort to rigid structural engineering or expensive fine-tuning, limiting their deployability and adaptability. We propose AgentDropoutV2, a test-time rectify-or-reject pruning framework designed to dynamically optimize MAS information flow without retraining. Our approach acts as an active firewall, intercepting agent outputs and employing a retrieval-augmented rectifier to iteratively correct errors based on a failure-driven indicator pool. This mechanism allows for the precise identification of potential errors using distilled failure patterns as prior knowledge. Irreparable outputs are subsequently pruned to prevent error propagation, while a fallback strategy preserves system integrity. Empirical results on extensive math benchmarks show that AgentDropoutV2 significantly boosts the MAS's task performance, achieving an average accuracy gain of 6.3 percentage points on math benchmarks. Furthermore, the system exhibits robust generalization and adaptivity, dynamically modulating rectification efforts based on task difficulty while leveraging context-aware indicators to resolve a wide spectrum of error patterns. Our code and dataset are released at https://github.com/TonySY2/AgentDropoutV2.

## Q&A 论文解读

### Q1: 这篇论文试图解决什么问题？

这篇论文旨在解决多智能体系统（MAS）中错误信息传播导致的性能下降问题。随着基于大语言模型的智能体在复杂任务中广泛应用，多智能体系统通过协同合作展现出显著优势，但其结构复杂性也使得单个智能体的错误输出容易沿交互链传播，最终影响整体任务结果。现有方法主要分为两类：一是通过优化通信拓扑结构（如有向无环图）来约束错误路径的结构优化方法；二是通过微调智能体或利用过程监督数据来增强其内在推理能力的参数内化方法。然而，这些方法均存在明显不足：它们依赖于离线优化，缺乏测试时的自适应能力。例如，结构优化方法通常基于训练统计信息预设静态连接图，永久排除某些智能体而无法尝试纠正其错误；参数方法则依赖固定权重，无法动态修正错误。这种静态特性导致系统在推理过程中无法挽救可纠正的错误，限制了部署的灵活性和适应性。因此，本文的核心问题是设计一个无需重新训练、能在测试时动态优化多智能体系统信息流的框架，以实时拦截、纠正或拒绝错误信息，从而防止错误传播并提升系统性能。为此，论文提出了AgentDropoutV2，通过检索增强的纠正机制和基于失败模式的先验知识库，实现错误识别与修正，并对无法修复的输出进行剪枝，最终在数学推理等任务中显著提高多智能体系统的准确性和鲁棒性。

### Q2: 有哪些相关研究？

本文的相关研究主要围绕提升多智能体系统（MAS）的鲁棒性，可分为三类：鲁棒架构设计、错误监控机制以及推理轨迹利用。

在**鲁棒架构设计**方面，现有工作通过优化图结构、采用稀疏通信拓扑或设计角色化团队来抑制错误传播。这些方法通常依赖于预定义的结构工程，缺乏动态适应性。本文提出的框架则作为一个即插即用的通用模块，无需重构系统架构，实现了更高的灵活性和部署便利性。

在**错误监控机制**中，研究包括基于图的异常检测、测试时校正（拦截-检测-纠正）以及错误归因追踪。这些方法多侧重于被动检测或事后分析。本文的框架进一步发展为主动校正与拒绝机制，通过检索增强的校正器进行迭代纠错，并结合失败驱动的指示器池实现精准错误识别，对不可修复的输出进行剪枝，从而在测试时实时阻断错误传播。

在**推理轨迹利用**方面，已有工作利用执行轨迹构建偏好数据或进行过程验证，以提升推理准确性。本文继承并发展了这一思路，将历史失败模式提炼为对抗性指示器池，作为先验知识指导在线监督，增强了系统对多样化错误模式的适应能力。与依赖训练数据优化的方法不同，本文框架无需微调，仅通过测试时动态调整即可实现性能提升。

### Q3: 论文如何解决这个问题？

论文通过提出一个名为AgentDropoutV2的测试时“修正或拒绝”剪枝框架来解决多智能体系统中错误信息级联传播的问题。其核心思想是在不重新训练系统的情况下，动态拦截并优化智能体间的信息流，充当一个主动防火墙。

**整体框架与流程**：该框架在MAS执行时介入。当一个智能体A_i产生输出o_i并准备传递给后继节点前，该输出会被主动拦截。一个专用的“修正器”会对其内容进行审查，判断是否存在潜在错误并尝试迭代修正。若错误无法修正，则直接丢弃该输出，防止其污染下游。

**核心模块与关键技术**：
1.  **基于检索的指示器池**：框架的核心创新之一是构建了一个离线的“指示器池”I。每个指示器是一个三元组，包含错误类型名称、错误定义和触发条件。该池通过失败驱动的挖掘策略构建，从历史错误案例中提炼出结构化的错误模式知识，作为先验知识用于精准识别错误。
2.  **相关指示器检索**：在运行时，修正器模型会从当前智能体输出中提取任务场景和动作类型的关键词，并编码为查询向量。随后，从指示器池中检索出与当前上下文最相关的Top-K个指示器，构成当前活动的指示器集，实现监督的针对性。
3.  **修正或拒绝剪枝机制**：修正器使用检索到的指示器逐一评估智能体输出。对于每个指示器，模型会生成一个二元违规标志和诊断理由。采用严格的零容忍策略：只要任何一个活动指示器检测到违规，即激活全局错误状态。后续处理遵循一个三态门控机制：
    *   **通过**：若无错误，输出被立即接受。
    *   **重试**：若检测到错误且未超过最大迭代次数，则将具体的诊断反馈提供给原智能体，令其重新生成输出。
    *   **拒绝**：若达到最大迭代次数后错误仍存在，则直接丢弃该输出，充当“语义断路器”，彻底阻断错误传播。
4.  **全局回退与零样本处理**：为防止过度剪枝导致系统结构崩溃（如剩余有效信息过少），框架引入了全局回退策略：当剩余消息低于安全阈值时，触发系统级重置，重新开始整个MAS推理，确保结论基于足够健壮的共识。对于零样本场景，框架可初始化一个通用的逻辑检查指示器，保证基本功能可用。

**创新点**：
*   **测试时动态优化**：无需对MAS进行结构性改造或微调，在推理时动态介入，提升了部署性和适应性。
*   **检索增强的错误修正**：将历史失败模式编码为可检索的指示器，使修正过程有据可依，提高了错误识别与修正的精准度。
*   **严格的修剪与回退机制**：通过“修正或拒绝”的二元决策和系统级回退，在保证信息纯净度的同时维护了系统的整体完整性。

### Q4: 论文做了哪些实验？

论文在数学推理和代码生成两大领域进行了全面的实验评估。实验设置基于AutoGen框架内的SelectorGroupChat多智能体系统，使用GPT-4.1-mini作为选择器骨干，Qwen3-8B和Qwen3-4B作为推理和修正组件。关键超参数包括最大聊天轮次为6，最大修正迭代轮次T_max为3，测试时检索的指示器数量K_act为5。

在数据集方面，数学推理使用了九个基准测试，涵盖从GSM8K到AIME25等不同难度级别；代码生成则使用了MBPP、HumanEval、CodeContests和LiveCodeBench四个数据集。对比方法包括单智能体基线（Single）和标准AutoGen多智能体框架。

主要结果显示，在数学领域，使用检索指示器的完整方法在Qwen3-8B骨干上取得了55.25%的平均准确率，相比AutoGen基线平均提升了6.3个百分点。具体到困难任务如AIME25，准确率从23.33%提升至30.00%。在代码领域，该方法平均准确率达到48.65%，优于AutoGen的46.44%，尤其在CodeContests（从6.06%提升至9.26%）和LiveCodeBench（从29.25%提升至32.75%）上提升显著。消融实验验证了修正迭代轮次、检索指示器数量及去重机制的重要性。此外，实验还证明了指示器池在不同规模模型（如从Qwen3-8B迁移到Qwen3-4B）间的可移植性，以及框架在跨领域（从数学到代码）的泛化能力。

### Q5: 有什么可以进一步探索的点？

该论文的局限性在于其错误模式库（indicator pool）的构建依赖于历史失败轨迹，这可能导致对新领域或罕见错误模式的覆盖不足。未来研究可探索在线学习机制，使系统能在推理过程中动态更新模式库，提升适应性。此外，当前框架主要针对数学推理任务，未来可扩展至更复杂的多模态或开放域场景，验证其通用性。

从改进思路看，可引入轻量级预测模型来评估错误修复的置信度，从而优化“修正或拒绝”的决策阈值，减少不必要的计算开销。另外，可研究多智能体间的协同修正机制，允许智能体相互验证输出，而非仅依赖中心化防火墙。最后，将框架与可解释性技术结合，能帮助用户理解错误传播路径，进一步提升系统透明度和可信度。

### Q6: 总结一下论文的主要内容

该论文针对多智能体系统中错误信息传播导致性能下降的问题，提出了一种无需重新训练的动态优化框架AgentDropoutV2。其核心贡献在于设计了一个测试时“修正或拒绝”剪枝机制，通过构建基于历史失败轨迹的指示器池来识别潜在错误模式，并利用检索增强的修正器迭代纠正错误输出；对于无法修正的信息则进行剪枝以防止传播，同时采用回退策略保障系统完整性。实验表明，该方法在数学推理基准上平均提升6.3%的准确率，且展现出对任务难度自适应的泛化能力，有效优化了多智能体系统的信息流并显著提升了任务性能。
